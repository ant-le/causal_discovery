# @package _global_
# Smoke test configuration (minimal resources)
name: "smoke_test"

logger:
  wandb:
    enabled: false

data:
  train_family:
    name: train
    n_nodes: 10
    graph_cfg:
      type: er
      sparsity: 0.2
    mech_cfg:
      type: linear
      weight_scale: 1.0

  val_families:
    id_val:
      name: id_val
      n_nodes: 10
      graph_cfg:
        type: er
        sparsity: 0.2
      mech_cfg:
        type: linear
        weight_scale: 1.0

  test_families:
    test_1:
      name: test_1
      n_nodes: 10
      graph_cfg:
        type: er
        sparsity: 0.2
      mech_cfg:
        type: linear
        weight_scale: 1.0

  seeds_val: [100, 101]
  seeds_test: [200, 201]
  base_seed: 42
  samples_per_task: 32
  safety_checks: true
  num_workers: 0
  pin_memory: false
  normalize_data: true
  batch_size_train: 1
  batch_size_val: 1
  batch_size_test: 1
  batch_size_test_interventional: 1

model:
  type: "avici"
  num_nodes: 10
  d_model: 16
  nhead: 2
  num_layers: 2
  dim_feedforward: 32
  dropout: 0.1

trainer:
  max_steps: 10
  log_every_n_steps: 2
  val_check_interval: 5
  lr: 0.001
  accumulate_grad_batches: 1

inference:
  n_samples: 5

hydra:
  run:
    dir: ${oc.env:CAUSAL_META_RUN_DIR,experiments/runs/${name}/${now:%Y-%m-%d}/${now:%H-%M-%S}}
  sweep:
    dir: ${oc.env:CAUSAL_META_SWEEP_DIR,experiments/runs/${name}/multirun/${now:%Y-%m-%d}/${now:%H-%M-%S}}
    subdir: ${hydra.job.num}
